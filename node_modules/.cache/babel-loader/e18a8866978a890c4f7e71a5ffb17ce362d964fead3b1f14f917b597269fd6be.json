{"ast":null,"code":"import { AUTH_ACTION, CURRENT_USER_ACTION, LOGOUT_ACTION } from 'store/actions';\nimport { DEFAULT_INITIAL_ACTION_STATE } from \"../common\";\nconst INITIAL_STATE = {\n  isAuthenticated: false,\n  token: localStorage.getItem(\"token\"),\n  user: undefined,\n  fetching: false,\n  fetchingUser: false,\n  message: undefined,\n  error: false\n};\nconst authReducer = (state = INITIAL_STATE, action = DEFAULT_INITIAL_ACTION_STATE) => {\n  const {\n    type,\n    payload\n  } = action;\n  if (type === AUTH_ACTION.REQUEST) {\n    return {\n      ...INITIAL_STATE,\n      fetching: true\n    };\n  } else if (type === CURRENT_USER_ACTION.REQUEST) {\n    return {\n      ...INITIAL_STATE,\n      fetchingUser: true\n    };\n  } else if (type === AUTH_ACTION.SUCCESS) {\n    return {\n      ...state,\n      fetching: false,\n      fetchingUser: false,\n      token: payload.token,\n      user: payload.user,\n      isAuthenticated: true\n    };\n  } else if (type === AUTH_ACTION.FAILURE || type === CURRENT_USER_ACTION.FAILURE) {\n    return {\n      ...state,\n      fetching: false,\n      fetchingUser: false,\n      user: undefined,\n      error: true,\n      token: undefined,\n      isAuthenticated: false,\n      message: payload.message\n    };\n  } else if (type === CURRENT_USER_ACTION.SUCCESS) {\n    return {\n      ...state,\n      fetchingUser: false,\n      user: payload.user,\n      isAuthenticated: true\n    };\n  } else if (type === LOGOUT_ACTION) {\n    return {\n      ...INITIAL_STATE\n    };\n  } else {\n    return state;\n  }\n};\nexport default authReducer;","map":{"version":3,"names":["AUTH_ACTION","CURRENT_USER_ACTION","LOGOUT_ACTION","DEFAULT_INITIAL_ACTION_STATE","INITIAL_STATE","isAuthenticated","token","localStorage","getItem","user","undefined","fetching","fetchingUser","message","error","authReducer","state","action","type","payload","REQUEST","SUCCESS","FAILURE"],"sources":["E:/BizTecno/slide-fe-service/src/store/reducers/auth.ts"],"sourcesContent":["import {\n  AUTH_ACTION, CURRENT_USER_ACTION, LOGOUT_ACTION\n} from 'store/actions';\nimport { StandardAction , DEFAULT_INITIAL_ACTION_STATE,} from \"../common\"\n\nexport interface IUser {\n  email: string;\n  role: \"Admin\" | \"User\";\n}\n\nexport interface IAuthState {\n  isAuthenticated: boolean;\n  token: string;\n  user: IUser;\n  fetching: boolean;\n  fetchingUser: boolean;\n  message: string;\n  error: boolean;\n}\n\nconst INITIAL_STATE: IAuthState = {\n  isAuthenticated: false,\n  token: localStorage.getItem(\"token\")!,\n  user: undefined!,\n  fetching: false,\n  fetchingUser: false,\n  message: undefined!,\n  error: false\n};\n\nconst authReducer = (\n  state: IAuthState = INITIAL_STATE,\n  action: StandardAction = DEFAULT_INITIAL_ACTION_STATE,\n): IAuthState => {\n  const { type, payload } = action;\n  if (type === AUTH_ACTION.REQUEST) {\n    return { ...INITIAL_STATE, fetching: true };\n  } else if (type === CURRENT_USER_ACTION.REQUEST) {\n    return { ...INITIAL_STATE, fetchingUser: true };\n  } else if(type === AUTH_ACTION.SUCCESS) {\n    return { ...state, fetching: false, fetchingUser: false, token: payload.token, user: payload.user, isAuthenticated: true};\n  } else if(type === AUTH_ACTION.FAILURE || type === CURRENT_USER_ACTION.FAILURE) {\n    return { ...state, fetching: false, fetchingUser: false, user: undefined!, error: true, token: undefined!, isAuthenticated: false, message: payload.message};\n  } else if(type === CURRENT_USER_ACTION.SUCCESS) {\n    return { ...state, fetchingUser: false, user: payload.user, isAuthenticated: true};\n  } else if(type === LOGOUT_ACTION) {\n    return { ...INITIAL_STATE };\n  } else {\n    return state;\n  }\n};\n\nexport default authReducer;\n"],"mappings":"AAAA,SACEA,WAAW,EAAEC,mBAAmB,EAAEC,aAAa,QAC1C,eAAe;AACtB,SAA0BC,4BAA4B,QAAQ,WAAW;AAiBzE,MAAMC,aAAyB,GAAG;EAChCC,eAAe,EAAE,KAAK;EACtBC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAE;EACrCC,IAAI,EAAEC,SAAU;EAChBC,QAAQ,EAAE,KAAK;EACfC,YAAY,EAAE,KAAK;EACnBC,OAAO,EAAEH,SAAU;EACnBI,KAAK,EAAE;AACT,CAAC;AAED,MAAMC,WAAW,GAAGA,CAClBC,KAAiB,GAAGZ,aAAa,EACjCa,MAAsB,GAAGd,4BAA4B,KACtC;EACf,MAAM;IAAEe,IAAI;IAAEC;EAAQ,CAAC,GAAGF,MAAM;EAChC,IAAIC,IAAI,KAAKlB,WAAW,CAACoB,OAAO,EAAE;IAChC,OAAO;MAAE,GAAGhB,aAAa;MAAEO,QAAQ,EAAE;IAAK,CAAC;EAC7C,CAAC,MAAM,IAAIO,IAAI,KAAKjB,mBAAmB,CAACmB,OAAO,EAAE;IAC/C,OAAO;MAAE,GAAGhB,aAAa;MAAEQ,YAAY,EAAE;IAAK,CAAC;EACjD,CAAC,MAAM,IAAGM,IAAI,KAAKlB,WAAW,CAACqB,OAAO,EAAE;IACtC,OAAO;MAAE,GAAGL,KAAK;MAAEL,QAAQ,EAAE,KAAK;MAAEC,YAAY,EAAE,KAAK;MAAEN,KAAK,EAAEa,OAAO,CAACb,KAAK;MAAEG,IAAI,EAAEU,OAAO,CAACV,IAAI;MAAEJ,eAAe,EAAE;IAAI,CAAC;EAC3H,CAAC,MAAM,IAAGa,IAAI,KAAKlB,WAAW,CAACsB,OAAO,IAAIJ,IAAI,KAAKjB,mBAAmB,CAACqB,OAAO,EAAE;IAC9E,OAAO;MAAE,GAAGN,KAAK;MAAEL,QAAQ,EAAE,KAAK;MAAEC,YAAY,EAAE,KAAK;MAAEH,IAAI,EAAEC,SAAU;MAAEI,KAAK,EAAE,IAAI;MAAER,KAAK,EAAEI,SAAU;MAAEL,eAAe,EAAE,KAAK;MAAEQ,OAAO,EAAEM,OAAO,CAACN;IAAO,CAAC;EAC9J,CAAC,MAAM,IAAGK,IAAI,KAAKjB,mBAAmB,CAACoB,OAAO,EAAE;IAC9C,OAAO;MAAE,GAAGL,KAAK;MAAEJ,YAAY,EAAE,KAAK;MAAEH,IAAI,EAAEU,OAAO,CAACV,IAAI;MAAEJ,eAAe,EAAE;IAAI,CAAC;EACpF,CAAC,MAAM,IAAGa,IAAI,KAAKhB,aAAa,EAAE;IAChC,OAAO;MAAE,GAAGE;IAAc,CAAC;EAC7B,CAAC,MAAM;IACL,OAAOY,KAAK;EACd;AACF,CAAC;AAED,eAAeD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}