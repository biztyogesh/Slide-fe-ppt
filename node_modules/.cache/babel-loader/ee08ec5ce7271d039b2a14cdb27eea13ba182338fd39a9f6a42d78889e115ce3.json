{"ast":null,"code":"import { toast } from \"react-toastify\";\nexport function fetchRequest(url, token, method, body, headers) {\n  const requestHeaders = {\n    method,\n    headers: checkAndAppendHeaders(headers, token, body)\n  };\n  if (body) {\n    requestHeaders.body = body instanceof FormData ? body : JSON.stringify(body);\n  }\n  return fetch(url, requestHeaders).then(handleResponse);\n}\nexport function checkAndAppendHeaders(headers, token, body) {\n  if (!headers) {\n    headers = new Headers();\n  }\n  if (token) {\n    headers.set('Authorization', token);\n  }\n  if (!body || body && !(body instanceof FormData)) {\n    if (!headers.get('Content-Type')) {\n      headers.set('Content-Type', 'application/json');\n    }\n  }\n  return headers;\n}\nexport function generateUrlWithRequestParams(url, requestParams) {\n  Object.keys(requestParams).forEach(key => {\n    url = url.replace(`:${key}`, encodeURIComponent(requestParams[key]));\n  });\n  return url;\n}\nexport function generateQueryParamsString(queryParams) {\n  let query = '';\n  const queryParamsKeys = Object.keys(queryParams);\n  Object.keys(queryParams).forEach((key, index) => {\n    query += `${key}=${encodeURIComponent(queryParams[key])}`;\n    if (index < queryParamsKeys.length - 1) {\n      query += `&`;\n    }\n  });\n  return query;\n}\nfunction handleResponse(response) {\n  return new Promise((resolve, reject) => {\n    if (response.status === 401) {\n      localStorage.clear();\n      window.location.reload();\n      response.json().then(json => {\n        toast.error(json.message || 'Unauthorized');\n        reject(json.message || 'Unauthorized');\n      }).catch(error => reject(error));\n    } else if (response.status >= 200 && response.status < 300) {\n      const contentType = response.headers.get('content-type');\n      if (contentType && contentType.indexOf('application/json') !== -1) {\n        response.json().then(json => {\n          resolve(json);\n        }).catch(error => {\n          toast.error(error);\n          reject(error);\n        });\n      } else if (contentType && contentType.indexOf('text/html') !== -1) {\n        response.text().then(data => {\n          resolve(data);\n        }).catch(error => {\n          toast.error(error);\n          reject(error);\n        });\n      } else {\n        resolve(response);\n      }\n    } else {\n      response.json().then(json => {\n        toast.error(json.message || json.error || 'Internal Server Error');\n        reject(json.message || json.error || 'Internal Server Error');\n      }).catch(error => reject(error));\n    }\n  });\n}\nexport function getFullUrl(baseUrl, endPoint, params) {\n  let url = `${baseUrl}${endPoint}`;\n  if (params && params.urlParams) {\n    url = generateUrlWithRequestParams(url, params.urlParams);\n  }\n  if (params && params.queryParams) {\n    url = `${url}?${generateQueryParamsString(params.queryParams)}`;\n  }\n  return url;\n}\nexport async function callApiWithRetries(retryCount, ...args) {\n  try {\n    return await fetchRequest(...args);\n  } catch (error) {\n    if (retryCount <= 0) throw error;\n    return callApiWithRetries(retryCount - 1, ...args);\n  }\n}","map":{"version":3,"names":["toast","fetchRequest","url","token","method","body","headers","requestHeaders","checkAndAppendHeaders","FormData","JSON","stringify","fetch","then","handleResponse","Headers","set","get","generateUrlWithRequestParams","requestParams","Object","keys","forEach","key","replace","encodeURIComponent","generateQueryParamsString","queryParams","query","queryParamsKeys","index","length","response","Promise","resolve","reject","status","localStorage","clear","window","location","reload","json","error","message","catch","contentType","indexOf","text","data","getFullUrl","baseUrl","endPoint","params","urlParams","callApiWithRetries","retryCount","args"],"sources":["E:/BizTecno/slide-fe-service/src/Api/index.ts"],"sourcesContent":["import { toast } from \"react-toastify\";\n\nexport function fetchRequest(\n  url: string,\n  token: string,\n  method: 'post' | 'get' | 'put' | 'delete',\n  body?: any,\n  headers?: Headers,\n): Promise<any> {\n  const requestHeaders: any = {\n    method,\n    headers: checkAndAppendHeaders(headers!, token, body),\n  };\n  if (body) {\n    requestHeaders.body =\n      body instanceof FormData ? body : JSON.stringify(body);\n  }\n  return fetch(url, requestHeaders).then(handleResponse);\n}\n\nexport function checkAndAppendHeaders(\n  headers: Headers,\n  token: string,\n  body?: any,\n): Headers {\n  if (!headers) {\n    headers = new Headers();\n  }\n  if (token) {\n    headers.set('Authorization', token);\n  }\n  if (!body || (body && !(body instanceof FormData))) {\n    if (!headers.get('Content-Type')) {\n      headers.set('Content-Type', 'application/json');\n    }\n  }\n  return headers;\n}\n\nexport function generateUrlWithRequestParams(\n  url: string,\n  requestParams: { [key: string]: any },\n): string {\n  Object.keys(requestParams).forEach((key: string) => {\n    url = url.replace(`:${key}`, encodeURIComponent(requestParams[key]));\n  });\n  return url;\n}\n\nexport function generateQueryParamsString(queryParams: {\n  [key: string]: any;\n}): string {\n  let query = '';\n  const queryParamsKeys = Object.keys(queryParams);\n  Object.keys(queryParams).forEach((key: string, index: number) => {\n    query += `${key}=${encodeURIComponent(queryParams[key])}`;\n    if (index < queryParamsKeys.length - 1) {\n      query += `&`;\n    }\n  });\n  return query;\n}\n\nfunction handleResponse(response: Response) {\n  return new Promise((resolve, reject) => {\n    if (response.status === 401) {\n      localStorage.clear();\n      window.location.reload();\n      response\n        .json()\n        .then((json) => {\n          toast.error(json.message || 'Unauthorized');\n          reject(json.message || 'Unauthorized');\n        })\n        .catch((error) => reject(error));\n    } else if (response.status >= 200 && response.status < 300) {\n      const contentType = response.headers.get('content-type');\n      if (contentType && contentType.indexOf('application/json') !== -1) {\n        response\n          .json()\n          .then((json) => {\n            resolve(json);\n          })\n          .catch((error: any) => {\n            toast.error(error);\n            reject(error);\n          });\n      } else if (contentType && contentType.indexOf('text/html') !== -1) {\n        response\n          .text()\n          .then((data) => {\n            resolve(data);\n          })\n          .catch((error: any) => {\n            toast.error(error);\n            reject(error);\n          });\n      } else {\n        resolve(response);\n      }\n    } else {\n      response\n        .json()\n        .then((json) => {\n          toast.error(json.message || json.error || 'Internal Server Error');\n          reject(json.message || json.error || 'Internal Server Error');\n        })\n        .catch((error) => reject(error));\n    }\n  });\n}\n\nexport function getFullUrl(\n  baseUrl: string,\n  endPoint: string,\n  params?: { urlParams?: any; queryParams?: any },\n): string {\n  let url = `${baseUrl}${endPoint}`;\n  if (params && params.urlParams) {\n    url = generateUrlWithRequestParams(url, params.urlParams);\n  }\n  if (params && params.queryParams) {\n    url = `${url}?${generateQueryParamsString(params.queryParams)}`;\n  }\n  return url;\n}\n\nexport async function callApiWithRetries(\n  retryCount: number,\n  ...args: any\n): Promise<any> {\n  try {\n    return await (fetchRequest as Function)(...args);\n  } catch (error) {\n    if (retryCount <= 0) throw error;\n    return callApiWithRetries(retryCount - 1, ...args);\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}